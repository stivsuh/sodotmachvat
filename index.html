<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>NIVERO - ×¡×¤×¨ ×”××ª×›×•× ×™× ×”×©×œ×</title>
    <link href="https://fonts.googleapis.com/css2?family=Frank+Ruhl+Libre:wght@400;700&family=Rubik:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        /* --- ××©×ª× ×™× ×•×¢×™×¦×•×‘ × ×§×™ --- */
        :root {
            --book-width: 420px;
            --book-height: 700px;
            --bg-color: #f0f2f5;
            --paper: #ffffff;
            --text: #2c3e50;
            --accent: #d35400;
            --anim-speed: 0.6s;
        }

        * { box-sizing: border-box; outline: none; -webkit-tap-highlight-color: transparent; }

        body {
            margin: 0; padding: 0;
            font-family: 'Rubik', sans-serif;
            background-color: var(--bg-color);
            height: 100vh;
            width: 100vw;
            display: flex; justify-content: center; align-items: center;
            overflow: hidden;
            color: var(--text);
            position: fixed; /* ××•× ×¢ ×’×œ×™×œ×” ×©×œ ×›×œ ×”×“×£ ×‘××•×‘×™×™×œ */
        }

        /* --- ××¡×š ×›× ×™×¡×” --- */
        #login-screen {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(255,255,255,0.98);
            z-index: 10000;
            display: flex; justify-content: center; align-items: center;
            transition: opacity 0.5s;
        }
        .login-box { text-align: center; width: 90%; max-width: 320px; padding: 40px; border-radius: 20px; box-shadow: 0 10px 40px rgba(0,0,0,0.1); background: white; border: 1px solid #eee; }
        .login-title { font-weight: 900; font-size: 3em; color: var(--accent); margin-bottom: 5px; letter-spacing: 2px; }
        .login-input { width: 100%; padding: 15px; margin: 20px 0; border: 1px solid #ddd; border-radius: 50px; text-align: center; font-size: 1.1em; transition: 0.3s; }
        .login-input:focus { border-color: var(--accent); }
        .login-btn { width: 100%; padding: 15px; background: var(--accent); color: white; border: none; border-radius: 50px; font-size: 1.1em; font-weight: bold; cursor: pointer; transition: 0.2s; }
        .login-btn:hover { background: #e67e22; transform: translateY(-2px); }

        /* --- ×¡×¤×¨ (Flipbook) --- */
        .scene {
            width: var(--book-width); height: var(--book-height);
            position: relative; perspective: 2000px;
            margin: 0 auto;
            transition: width 0.3s, height 0.3s;
        }

        .page {
            width: 100%; height: 100%;
            position: absolute; top: 0; left: 0;
            background: var(--paper);
            border-radius: 5px 15px 15px 5px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.15);
            transform-origin: center bottom;
            transition: transform var(--anim-speed) ease, opacity var(--anim-speed) ease;
            display: flex; flex-direction: column;
            overflow: hidden; border: 1px solid #eee;
        }

        .page.flipped {
            transform: translateX(-120%) rotate(-5deg);
            opacity: 0; pointer-events: none;
        }

        /* ×ª×•×›×Ÿ ×”×¢××•×“ */
        .page-content {
            padding: 30px; height: 100%;
            display: flex; flex-direction: column;
            overflow-y: auto; scrollbar-width: thin;
        }
        .page-content::-webkit-scrollbar { width: 4px; }
        .page-content::-webkit-scrollbar-thumb { background-color: #ddd; border-radius: 4px; }

        /* ×¢×™×¦×•×‘ ××ª×›×•×Ÿ */
        .recipe-header { border-bottom: 2px solid var(--accent); padding-bottom: 10px; margin-bottom: 20px; text-align: center; }
        .recipe-title { font-family: 'Frank Ruhl Libre', serif; font-size: 2em; color: var(--text); margin: 0; font-weight: 700; line-height: 1.1; }
        .recipe-meta { font-size: 0.9em; color: #888; margin-top: 5px; display:flex; justify-content:center; gap: 15px; font-family: 'Rubik', sans-serif; }

        .section-title { 
            font-weight: 700; color: var(--accent); margin: 20px 0 10px 0; font-size: 1.1em; border-bottom:1px solid #f5f5f5; padding-bottom:5px;
        }
        
        ul.ingredients { list-style: none; padding: 0; margin: 0; font-size: 1em; line-height: 1.6; }
        ul.ingredients li { padding-right: 15px; position: relative; margin-bottom: 6px; }
        ul.ingredients li::before { content: 'â€¢'; color: var(--accent); position: absolute; right: 0; font-weight: bold; }

        ol.instructions { padding-right: 20px; margin: 0; font-size: 1em; line-height: 1.6; color: #444; }
        ol.instructions li { margin-bottom: 12px; }

        /* ×˜×‘×œ×ª ×¢×¨×›×™× ×ª×–×•× ×ª×™×™× */
        .nutrition-box {
            display: flex; justify-content: space-around;
            background: #fdfbf7; border: 1px solid #eee;
            border-radius: 8px; padding: 10px; margin-bottom: 20px;
        }
        .nut-item { text-align: center; font-size: 0.8em; color: #666; display: flex; flex-direction: column; }
        .nut-val { font-size: 1.1em; font-weight: bold; color: var(--accent); }

        .page-num { margin-top: auto; text-align: center; font-size: 0.8em; color: #bbb; padding-top: 15px; }

        /* ×›×¤×ª×•×¨ ×©×£ ×‘×ª×•×š ×¢××•×“ */
        .ai-help-btn {
            background: white; border: 1px solid var(--accent); color: var(--accent);
            padding: 10px; border-radius: 50px; font-size: 0.9em; font-weight: bold;
            cursor: pointer; margin-top: 25px; width: 100%; transition: 0.2s;
            display: flex; align-items: center; justify-content: center; gap: 8px;
        }
        .ai-help-btn:hover { background: var(--accent); color: white; }

        /* ×¢××•×“ ×©×¢×¨ */
        .cover-content { 
            text-align: center; height: 100%; display: flex; flex-direction: column; justify-content: center; align-items: center; 
            border: 5px double var(--accent); margin: 15px; padding: 20px;
        }

        /* --- ×‘×§×¨×™× (×›×¤×ª×•×¨×™ ×“×¤×“×•×£) --- */
        .controls { 
            position: absolute; bottom: 20px; width: 100%; 
            display: flex; justify-content: space-between; padding: 0 40px; 
            pointer-events: none; /* ×›×“×™ ×œ× ×œ×—×¡×•× ×œ×—×™×¦×” ×‘××¨×›×– */
            z-index: 100;
        }
        
        .nav-btn { 
            pointer-events: auto; /* ×›×¤×ª×•×¨×™× ×œ×—×™×¦×™× */
            background: white; color: var(--text); border: none; width: 55px; height: 55px; 
            border-radius: 50%; box-shadow: 0 5px 20px rgba(0,0,0,0.2); cursor: pointer; 
            font-size: 1.4em; transition: 0.2s; display: flex; align-items: center; justify-content: center; 
        }
        .nav-btn:hover { transform: scale(1.1); color: var(--accent); }
        .nav-btn:disabled { opacity: 0.5; cursor: not-allowed; background: #eee; }

        /* --- ×¦'××˜ --- */
        .chat-widget { position: fixed; bottom: 30px; left: 30px; z-index: 5000; }
        .chat-fab { width: 60px; height: 60px; background: var(--accent); border-radius: 50%; display: flex; justify-content: center; align-items: center; color: white; font-size: 1.6em; cursor: pointer; box-shadow: 0 5px 25px rgba(0,0,0,0.2); transition: 0.3s; border: 3px solid white; }
        .chat-window { position: fixed; bottom: 100px; left: 20px; right: 20px; height: 60vh; max-width: 400px; background: white; border-radius: 15px; box-shadow: 0 20px 60px rgba(0,0,0,0.3); display: none; flex-direction: column; overflow: hidden; border: 1px solid #eee; margin: auto; }
        .chat-header { background: var(--accent); padding: 15px; color: white; display: flex; justify-content: space-between; align-items: center; }
        .chat-body { flex: 1; padding: 15px; overflow-y: auto; background: #fafafa; display:flex; flex-direction:column; gap:10px; }
        .msg { padding: 10px 15px; border-radius: 12px; max-width: 85%; font-size: 0.95em; line-height: 1.4; }
        .msg.bot { background: white; align-self: flex-start; border: 1px solid #ddd; }
        .msg.user { background: var(--accent); color: white; align-self: flex-end; }
        .chat-footer { padding: 10px; background: white; border-top: 1px solid #eee; display: flex; gap: 5px; }
        .chat-input { flex: 1; padding: 10px; border-radius: 20px; border: 1px solid #eee; background: #f9f9f9; font-size: 16px; } /* font-size 16px ××•× ×¢ ×–×•× ×‘××™×™×¤×•×Ÿ */
        .chat-send { background: var(--accent); color: white; border: none; width: 40px; height: 40px; border-radius: 50%; cursor: pointer; display:flex; align-items:center; justify-content:center;}
        
        /* ×”×ª×××” ×œ××•×‘×™×™×œ */
        @media (max-width: 600px) { 
            :root { 
                --book-width: 90vw; 
                --book-height: 80vh; 
            } 
            
            .controls { bottom: 20px; padding: 0 20px; }
            .nav-btn { width: 50px; height: 50px; font-size: 1.2em; background: rgba(255,255,255,0.9); }
            
            .recipe-title { font-size: 1.6em; }
            .recipe-meta { font-size: 0.8em; }
            .section-title { font-size: 1em; margin-top: 15px; }
            
            /* ×¦'××˜ ×‘××•×‘×™×™×œ - ×”×¢×œ××ª ×”×›×¤×ª×•×¨ ×œ××¢×œ×” */
            .chat-widget { bottom: 90px; left: 20px; } /* ×¢×œ×” ×-20px ×œ-90px */
            .chat-window { left: 10px; right: 10px; bottom: 160px; height: 45vh; width: auto; max-width: none; }
        }
    </style>
</head>
<body>

    <!-- ×œ×•×’×™×Ÿ -->
    <div id="login-screen">
        <div class="login-box">
            <div class="login-title">NIVERO</div>
            <div style="margin-bottom:30px; color:#888;">×¡×¤×¨ ×”××ª×›×•× ×™× ×”×“×™×’×™×˜×œ×™</div>
            <input type="password" id="passInput" class="login-input" placeholder="×”×›× ×¡ ×¡×™×¡××">
            <button class="login-btn" onclick="checkLogin()">×”×ª×—×œ ×œ×‘×©×œ</button>
            <div id="errorMsg" style="color:red; display:none; margin-top:15px; font-size:0.9em;">×¡×™×¡×× ×©×’×•×™×”</div>
        </div>
    </div>

    <!-- ×”×¡×¤×¨ -->
    <div class="scene">
        <div class="book" id="book">
            <!-- ×”×“×¤×™× ×™×•×•×¦×¨×• ×›××Ÿ -->
        </div>

        <div class="controls">
            <button class="nav-btn" id="prevBtn" onclick="prevPage()"><i class="fas fa-arrow-right"></i></button>
            <button class="nav-btn" id="nextBtn" onclick="nextPage()"><i class="fas fa-arrow-left"></i></button>
        </div>
    </div>

    <!-- ×¦'××˜ -->
    <div class="chat-widget">
        <div class="chat-window" id="chatWindow">
            <div class="chat-header">
                <span>×©×£ × ×™×¨×• ğŸ‘¨â€ğŸ³</span>
                <i class="fas fa-times" style="cursor:pointer;" onclick="toggleChat()"></i>
            </div>
            <div class="chat-body" id="chatBody">
                <div class="msg bot">×©×œ×•×! ×× ×™ ×›××Ÿ ×œ×¢×–×•×¨ ×¢× ×–×× ×™×, ×˜×™×¤×™× ×•×ª×—×œ×™×¤×™× ×œ×›×œ ××ª×›×•×Ÿ.</div>
            </div>
            <div class="chat-footer">
                <input type="text" id="chatInput" class="chat-input" placeholder="×©××œ ×©××œ×”..." onkeypress="handleEnter(event)">
                <button class="chat-send" onclick="sendMsg()"><i class="fas fa-paper-plane"></i></button>
            </div>
        </div>
        <div class="chat-fab" onclick="toggleChat()"><i class="fas fa-comment-dots"></i></div>
    </div>

    <script>
        const apiKey = ""; // API Key Injected
        let currentPage = 0;
        let pages = [];
        let context = "";

        // ×¨×©×™××ª ××ª×›×•× ×™× ××œ××” (×œ×œ× ×ª××•× ×•×ª)
        const recipes = [
            {
                title: "×¡×˜×™×™×§ ×›×¨×•×‘×™×ª ×¦×¨×•×‘",
                meta: "15 ×“×§×•×ª | ×§×œ | ×˜×‘×¢×•× ×™",
                nut: { cal: 130, pro: "4", carb: "9", fat: "8" },
                ings: ["1 ×¨××© ×›×¨×•×‘×™×ª ×‘×™× ×•× ×™", "4 ×›×¤×•×ª ×©××Ÿ ×–×™×ª", "1 ×›×¤×™×ª ××œ×— ×’×¡", "1/2 ×›×¤×™×ª ×¤×œ×¤×œ ×©×—×•×¨", "1/2 ×›×•×¡ ××™× ×¨×•×ª×—×™×"],
                inst: ["×—×•×ª×›×™× ××ª ×”×›×¨×•×‘×™×ª ×œ×¤×¨×•×¡×•×ª ×¢×‘×•×ª.", "××—×××™× ××—×‘×ª × ×™×¨×•×¡×˜×” 2 ×“×§×•×ª.", "××•×¡×™×¤×™× ×©××Ÿ ×•×× ×™×—×™× ××ª ×”×¡×˜×™×™×§×™×. <strong>×ª×™×‘×•×œ ×¨××©×•× ×™:</strong> ×‘×•×–×§×™× ×—×¦×™ ××”××œ×— ×•×”×¤×œ×¤×œ. ×œ× ××–×™×–×™× 5 ×“×§×•×ª!", "×”×•×¤×›×™×. <strong>×ª×™×‘×•×œ ×©× ×™:</strong> ××¤×–×¨×™× ××ª ×©××¨ ×”×ª×‘×œ×™× ×™×.", "××•×¡×™×¤×™× ××™×, ×¡×•×’×¨×™× ××›×¡×” ×•××‘×©×œ×™× 5 ×“×§×•×ª ×¨×™×›×•×š."]
            },
            {
                title: "×§×¦×™×¦×•×ª ×¢×“×©×™× ×–×”×•×‘×•×ª",
                meta: "30 ×“×§×•×ª | ×‘×™× ×•× ×™ | ×¦××—×•× ×™",
                nut: { cal: 150, pro: "8", carb: "18", fat: "5" },
                ings: ["1.5 ×›×•×¡×•×ª ×¢×“×©×™× ×›×ª×•××•×ª ××‘×•×©×œ×•×ª (×™×‘×©×•×ª)", "1 ×’×–×¨ ××’×•×¨×¨ ×“×§ ×•×¡×—×•×˜", "1 ×‘×¦×œ ×§×¦×•×¥ ×“×§", "1 ×‘×™×¦×”", "1/2 ×›×•×¡ ×¤×™×¨×•×¨×™ ×œ×—×", "×›×¤×™×ª ××œ×—, ×›××•×Ÿ, ×›×•×¨×›×•×"],
                inst: ["<strong>×ª×™×‘×•×œ ×”×¢×™×¡×”:</strong> ××¢×¨×‘×‘×™× ×¢×“×©×™×, ×™×¨×§×•×ª ×•×‘×™×¦×” ×¢× ×”××œ×— ×•×”×›××•×Ÿ.", "××•×¡×™×¤×™× ×¤×™×¨×•×¨×™× ×œ×¢×™×¡×” ×™×¦×™×‘×”.", "××—×××™× ××—×‘×ª ×•×©××Ÿ.", "××˜×’× ×™× 3 ×“×§×•×ª ××›×œ ×¦×“ ×¢×“ ×œ×”×–×”×‘×”."]
            },
            {
                title: "×©×§×©×•×§×” ×™×¨×•×§×”",
                meta: "20 ×“×§×•×ª | ×§×œ | ×—×œ×‘×™",
                nut: { cal: 220, pro: "14", carb: "6", fat: "16" },
                ings: ["400 ×’×¨× ×ª×¨×“", "1 ×‘×¦×œ ×§×¦×•×¥", "250 ×\"×œ ×©×× ×ª", "4 ×‘×™×¦×™×", "××œ×—, ×¤×œ×¤×œ, ××•×¡×§×˜"],
                inst: ["××˜×’× ×™× ×‘×¦×œ. ××•×¡×™×¤×™× ×ª×¨×“ ×•×××“×™×.", "××•×¡×™×¤×™× ×©×× ×ª. <strong>×ª×™×‘×•×œ:</strong> ××œ×—, ×¤×œ×¤×œ ×•××•×¡×§×˜.", "×©×•×‘×¨×™× ×‘×™×¦×™×.", "××›×¡×™× ×•××‘×©×œ×™× 6 ×“×§×•×ª."]
            },
            {
                title: "×‘×˜×˜×” ××§×•×¨××œ×ª",
                meta: "25 ×“×§×•×ª | ×§×œ | ×˜×‘×¢×•× ×™",
                nut: { cal: 190, pro: "2", carb: "30", fat: "7" },
                ings: ["2 ×‘×˜×˜×•×ª ×§×•×‘×™×•×ª", "3 ×›×¤×•×ª ×©××Ÿ ×–×™×ª", "××œ×— ×’×¡", "×¨×•×–××¨×™×Ÿ ×˜×¨×™"],
                inst: ["××—×××™× ××—×‘×ª ×•×©××Ÿ.", "×¦×•×¨×‘×™× ×‘×˜×˜×” 4 ×“×§×•×ª ×œ×§×¨××¡×˜.", "×”×•×¤×›×™× ×•××˜×’× ×™× ×œ×¨×™×›×•×š.", "<strong>×ª×™×‘×•×œ:</strong> ××•×¡×™×¤×™× ×¨×•×–××¨×™×Ÿ ×•××œ×— ×‘×¡×•×£."]
            },
            {
                title: "×œ×‘×™×‘×•×ª ×§×™×©×•××™×",
                meta: "30 ×“×§×•×ª | ×‘×™× ×•× ×™ | ×¦××—×•× ×™",
                nut: { cal: 90, pro: "4", carb: "8", fat: "5" },
                ings: ["4 ×§×™×©×•××™× ××’×•×¨×¨×™×", "2 ×‘×™×¦×™×", "3 ×›×¤×•×ª ×§××—", "×‘×¦×œ ×™×¨×•×§", "××œ×—, ×¤×œ×¤×œ"],
                inst: ["×××œ×™×—×™× ×§×™×©×•××™× ×•×¡×•×—×˜×™× ×”×™×˜×‘.", "××¢×¨×‘×‘×™× ×¢× ×©××¨ ×”×—×•××¨×™× ×•×”×¤×œ×¤×œ.", "××˜×’× ×™× ×ª×œ×•×œ×™×•×ª ×‘×©××Ÿ ×—× ×¢×“ ×”×–×”×‘×”."]
            },
            {
                title: "××¨×§ ×¢×’×‘× ×™×•×ª ×•××•×¨×–",
                meta: "40 ×“×§×•×ª | ×§×œ | ×˜×‘×¢×•× ×™",
                nut: { cal: 180, pro: "4", carb: "30", fat: "5" },
                ings: ["×‘×¦×œ ×§×¦×•×¥", "×§×•×¤×¡×ª ×¢×’×‘× ×™×•×ª ××¨×•×¡×§×•×ª", "1/2 ×›×•×¡ ××•×¨×–", "4 ×›×•×¡×•×ª ××™×", "×¤×¤×¨×™×§×”, ×¡×•×›×¨, ××œ×—"],
                inst: ["××˜×’× ×™× ×‘×¦×œ. ××•×¡×™×¤×™× ×¢×’×‘× ×™×•×ª ×•××™×.", "<strong>×ª×™×‘×•×œ:</strong> ×¤×¤×¨×™×§×”, ×¡×•×›×¨ ×•××œ×—.", "××•×¡×™×¤×™× ××•×¨×–, ××›×¡×™× ×•××‘×©×œ×™× 20 ×“×§×•×ª."]
            },
            {
                title: "×¡×˜×™×™×§ ×—×¦×™×œ ×‘×˜×—×™× ×”",
                meta: "20 ×“×§×•×ª | ×§×œ | ×˜×‘×¢×•× ×™",
                nut: { cal: 140, pro: "4", carb: "10", fat: "10" },
                ings: ["1 ×—×¦×™×œ ×¤×¨×•×¡", "×©××Ÿ ×–×™×ª", "×˜×—×™× ×” ×’×•×œ××™×ª", "×¡×™×œ××Ÿ", "××œ×— ×’×¡"],
                inst: ["×‘×•×–×§×™× ××œ×— ×¢×œ ×”×—×¦×™×œ, ××©×”×™× ×•×× ×’×‘×™×.", "×¦×•×¨×‘×™× ×‘××—×‘×ª ×™×‘×©×” ×œ×™×™×‘×•×©.", "××•×¡×™×¤×™× ×©××Ÿ ×•××˜×’× ×™× ×œ×¨×™×›×•×š.", "××’×™×©×™× ×¢× ×˜×—×™× ×” ×•×¡×™×œ××Ÿ."]
            },
            {
                title: "×¤× ×§×™×™×§ ×©×™×‘×•×œ×ª ×©×•×¢×œ",
                meta: "15 ×“×§×•×ª | ×§×œ | ×¦××—×•× ×™",
                nut: { cal: 180, pro: "6", carb: "25", fat: "5" },
                ings: ["×›×•×¡ ×§××— ×©\"×©", "×›×•×¡ ×—×œ×‘", "×‘×™×¦×”", "×›×¤×™×ª ××‘×§×ª ××¤×™×™×”", "×›×£ ×¡×•×›×¨, ××œ×—"],
                inst: ["××¢×¨×‘×‘×™× ×”×›×œ ×œ×‘×œ×™×œ×” (×”××œ×— ××“×’×™×© ××ª×™×§×•×ª).", "××—×××™× ××—×‘×ª ××©×•×× ×ª.", "×™×•×¦×§×™× ×•××˜×’× ×™× ×¢×“ ×‘×•×¢×•×ª, ×”×•×¤×›×™×."]
            },
            {
                title: "×¤×¡×˜×” ×¡×™×¨ ××—×“",
                meta: "15 ×“×§×•×ª | ×§×œ | ×˜×‘×¢×•× ×™",
                nut: { cal: 350, pro: "12", carb: "60", fat: "8" },
                ings: ["250 ×’×¨× ×¤×¡×˜×”", "15 ×©×¨×™", "2 ×›×¤×•×ª ×¨×¡×§", "3 ×›×•×¡×•×ª ××™×", "××•×¨×’× ×•, ××œ×—"],
                inst: ["×©××™× ×”×›×œ ×‘××—×‘×ª.", "<strong>×ª×™×‘×•×œ:</strong> ××•×¡×™×¤×™× ××•×¨×’× ×• ×•××œ×— ×œ××™×.", "××¨×ª×™×—×™× ×•××‘×©×œ×™× 12 ×“×§×•×ª ×ª×•×š ×¢×¨×‘×•×‘."]
            },
            {
                title: "×¡×œ×˜ ×§×™× ×•××” ×—×",
                meta: "20 ×“×§×•×ª | ×§×œ | ×˜×‘×¢×•× ×™",
                nut: { cal: 230, pro: "8", carb: "35", fat: "7" },
                ings: ["×›×•×¡ ×§×™× ×•××”", "×‘×¦×œ ×¡×’×•×œ", "×—××•×¦×™×•×ª, ×©×§×“×™×", "×œ×™××•×Ÿ, ×©××Ÿ ×–×™×ª, ××œ×—"],
                inst: ["×§×•×œ×™× ×§×™× ×•××”, ××•×¡×™×¤×™× ××™× ×•××‘×©×œ×™×.", "<strong>×ª×™×‘×•×œ ×¡×•×¤×™:</strong> ××¢×¨×‘×‘×™× ×¢× ×ª×•×¡×¤×•×ª, ×œ×™××•×Ÿ, ×©××Ÿ ×•××œ×—."]
            },
            {
                title: "×§×¦×™×¦×•×ª ×˜×•× ×” ×‘×¨×•×˜×‘",
                meta: "25 ×“×§×•×ª | ×§×œ | ×“×’×™×",
                nut: { cal: 160, pro: "20", carb: "5", fat: "6" },
                ings: ["2 ×˜×•× ×”", "×‘×™×¦×”, ×¤×™×¨×•×¨×™×", "×¨×•×˜×‘: ×¢×’×‘× ×™×•×ª, ×©×•×", "×¤×¤×¨×™×§×”, ×›××•×Ÿ, ××œ×—"],
                inst: ["××¢×¨×‘×‘×™× ×˜×•× ×” ×•×‘×™×¦×” ×œ×§×¦×™×¦×•×ª.", "××¨×ª×™×—×™× ×¢×’×‘× ×™×•×ª.", "<strong>×ª×™×‘×•×œ ×¨×•×˜×‘:</strong> ×¤×¤×¨×™×§×” ×•×›××•×Ÿ.", "××‘×©×œ×™× ×§×¦×™×¦×•×ª ×‘×¨×•×˜×‘ 15 ×“×§×•×ª."]
            },
            {
                title: "×¤×™×œ××£ ××•×¨×– ×—×’×™×’×™",
                meta: "25 ×“×§×•×ª | ×§×œ | ×˜×‘×¢×•× ×™",
                nut: { cal: 240, pro: "5", carb: "45", fat: "5" },
                ings: ["×›×•×¡ ××•×¨×–", "×’×–×¨, ×‘×¦×œ, ××¤×•× ×”", "×›×¤×™×ª ×›×•×¨×›×•×", "×›×¤×™×ª ××œ×—, ×¤×œ×¤×œ"],
                inst: ["××˜×’× ×™× ×™×¨×§×•×ª.", "××•×¡×™×¤×™× ××•×¨×–.", "<strong>×ª×™×‘×•×œ:</strong> ×›×•×¨×›×•× ×•××œ×— ×‘×©××Ÿ.", "××•×¡×™×¤×™× ××™× ×•××‘×©×œ×™× 18 ×“×§×•×ª."]
            },
            {
                title: "×˜×•×¨×˜×™×™×” ××”×™×¨×”",
                meta: "20 ×“×§×•×ª | ×§×œ | ×˜×‘×¢×•× ×™",
                nut: { cal: 140, pro: "3", carb: "28", fat: "2" },
                ings: ["2 ×›×•×¡×•×ª ×§××—", "3/4 ×›×•×¡ ××™× ×¨×•×ª×—×™×", "2 ×›×¤×•×ª ×©××Ÿ", "1/2 ×›×¤×™×ª ××œ×—"],
                inst: ["××¢×¨×‘×‘×™× ×§××— ×•××œ×—.", "××•×¡×™×¤×™× ××™× ×•×©××Ÿ ×•×œ×©×™×.", "××¨×“×“×™× ×“×§ ×•×§×•×œ×™× ×¢×œ ××—×‘×ª ×™×‘×©×”."]
            },
            {
                title: "×—×•××•×¡ ××•×§×¤×¥",
                meta: "10 ×“×§×•×ª | ×§×œ | ×˜×‘×¢×•× ×™",
                nut: { cal: 180, pro: "8", carb: "20", fat: "7" },
                ings: ["×§×•×¤×¡×ª ×—×•××•×¡ ××¡×•× ×Ÿ", "×›×£ ×©××Ÿ", "×¤×¤×¨×™×§×”, ×›××•×Ÿ, ××œ×—"],
                inst: ["××§×¤×™×¦×™× ×—×•××•×¡ ×‘×©××Ÿ ×œ×•×”×˜ ×œ×—×¨×™×›×”.", "××¡×™×¨×™× ××”××©.", "<strong>×ª×™×‘×•×œ ×—×:</strong> ×‘×•×–×§×™× ×ª×‘×œ×™× ×™× ××™×“."]
            },
            {
                title: "×ª×¤×•×—×™× ××§×•×¨××œ×™×",
                meta: "10 ×“×§×•×ª | ×§×œ | ××ª×•×§",
                nut: { cal: 150, pro: "0", carb: "30", fat: "3" },
                ings: ["3 ×ª×¤×•×—×™× ×—×ª×•×›×™×", "×›×£ ×¡×•×›×¨ ×—×•×", "1/2 ×›×¤×™×ª ×§×™× ××•×Ÿ", "×©××Ÿ"],
                inst: ["××˜×’× ×™× ×ª×¤×•×—×™× ×œ×¨×™×›×•×š.", "<strong>×ª×™×‘×•×œ:</strong> ××¤×–×¨×™× ×¡×•×›×¨ ×•×§×™× ××•×Ÿ.", "×××©×™×›×™× ×œ×˜×’×Ÿ ×œ×§×¨××•×œ."]
            }
        ];

        function initBook() {
            const book = document.getElementById('book');
            let html = '';

            // ×¢××•×“ ×©×¢×¨ × ×§×™
            html += `
                <div class="page" id="page0" style="z-index: 100;">
                    <div class="cover-content">
                        <h1 style="color:var(--accent); font-size:4em; margin-bottom:10px;">NIVERO</h1>
                        <h2 style="color:#555; font-weight:300; font-size:2em;">×¡×¤×¨ ×”××ª×›×•× ×™× ×”×©×œ×</h2>
                        <div style="width:80px; height:4px; background:var(--accent); margin:40px 0;"></div>
                        <p style="font-size:1.4em; line-height:1.6; color:#777;">
                            15 ××ª×›×•× ×™× ×‘×¨×™××™×<br>
                            ×‘××—×‘×ª×•×ª × ×™×¨×•×¡×˜×”<br>
                            ×¢× ×”×•×¨××•×ª ×ª×™×‘×•×œ ××“×•×™×§×•×ª
                        </p>
                        <div style="margin-top:60px; font-size:1em; color:#bbb;">
                            ×œ×—×¦×• ×¢×œ ×”×—×¥ ×”×©×××œ×™ ×›×“×™ ×œ×”×ª×—×™×œ
                        </div>
                    </div>
                </div>
            `;

            // ×™×¦×™×¨×ª ×¢××•×“×™ ×”××ª×›×•× ×™×
            recipes.forEach((rec, idx) => {
                const zIndex = 99 - idx;
                html += `
                    <div class="page" id="page${idx+1}" style="z-index: ${zIndex};">
                        <div class="page-content">
                            <div class="recipe-header">
                                <h2 class="recipe-title">${rec.title}</h2>
                                <div class="recipe-meta">${rec.meta}</div>
                            </div>
                            
                            <div class="nutrition-box">
                                <div class="nut-item"><span class="nut-val">${rec.nut.cal}</span> ×§×œ'</div>
                                <div class="nut-item"><span class="nut-val">${rec.nut.pro}×’'</span> ×—×œ×‘×•×Ÿ</div>
                                <div class="nut-item"><span class="nut-val">${rec.nut.carb}×’'</span> ×¤×—××™××”</div>
                                <div class="nut-item"><span class="nut-val">${rec.nut.fat}×’'</span> ×©×•××Ÿ</div>
                            </div>

                            <div class="section-title">××¦×¨×›×™×</div>
                            <ul class="ingredients">
                                ${rec.ings.map(x => `<li>${x}</li>`).join('')}
                            </ul>
                            <div class="section-title">×”×•×¨××•×ª ×”×›× ×” ×•×ª×™×‘×•×œ</div>
                            <ol class="instructions">
                                ${rec.inst.map(x => `<li>${x}</li>`).join('')}
                            </ol>
                            <button class="ai-help-btn" onclick="askChef('${rec.title}')">
                                <i class="fas fa-magic"></i> ×™×© ×œ×š ×©××œ×”? ×©××œ ××ª ×”×©×£
                            </button>
                            <div class="page-num">${idx+1}</div>
                        </div>
                    </div>
                `;
            });

            book.innerHTML = html;
            pages = document.querySelectorAll('.page');
            updateButtons();
        }

        // --- ×œ×•×’×™×§×” ---
        function checkLogin() {
            if(document.getElementById('passInput').value === '1234') {
                document.getElementById('login-screen').style.opacity = 0;
                setTimeout(() => document.getElementById('login-screen').style.display = 'none', 500);
            } else {
                document.getElementById('errorMsg').style.display = 'block';
            }
        }

        function nextPage() {
            if (currentPage < pages.length - 1) {
                // ×”×¢××•×“ ×”× ×•×›×—×™ ××ª×”×¤×š ×•×¢×£ ×©×××œ×”
                pages[currentPage].classList.add('flipped');
                currentPage++;
                updateButtons();
            }
        }

        function prevPage() {
            if (currentPage > 0) {
                currentPage--;
                // ×”×¢××•×“ ×”×§×•×“× ×—×•×–×¨ ×œ××§×•×
                pages[currentPage].classList.remove('flipped');
                updateButtons();
            }
        }

        function updateButtons() {
            const nextBtn = document.getElementById('nextBtn');
            const prevBtn = document.getElementById('prevBtn');

            // ×‘×“×™×§×ª ×’×‘×•×œ ×¢×œ×™×•×Ÿ (×¢××•×“ ××—×¨×•×Ÿ)
            if (currentPage >= pages.length - 1) {
                nextBtn.disabled = true;
                nextBtn.style.opacity = "0.5";
            } else {
                nextBtn.disabled = false;
                nextBtn.style.opacity = "1";
            }

            // ×‘×“×™×§×ª ×’×‘×•×œ ×ª×—×ª×•×Ÿ (×¢××•×“ ×¨××©×•×Ÿ)
            if (currentPage <= 0) {
                prevBtn.disabled = true;
                prevBtn.style.opacity = "0.5";
            } else {
                prevBtn.disabled = false;
                prevBtn.style.opacity = "1";
            }
        }

        function toggleChat() {
            const w = document.getElementById('chatWindow');
            w.style.display = w.style.display === 'flex' ? 'none' : 'flex';
        }

        function askChef(recipe) {
            toggleChat();
            context = `×”××ª×›×•×Ÿ: ${recipe}.`;
            addMsg('bot', `×”×™×™! ×× ×™ ×›××Ÿ ×œ×¢×–×•×¨ ×¢× ×”<strong>${recipe}</strong>. ××” ×ª×¨×¦×” ×œ×“×¢×ª?`);
        }

        function addMsg(cls, txt) {
            const div = document.createElement('div');
            div.className = `msg ${cls}`;
            div.innerHTML = txt;
            const body = document.getElementById('chatBody');
            body.appendChild(div);
            body.scrollTop = body.scrollHeight;
        }

        async function sendMsg() {
            const inp = document.getElementById('chatInput');
            const txt = inp.value.trim();
            if(!txt) return;
            addMsg('user', txt);
            inp.value = '';
            
            try {
                let p = "××ª×” ×©×£ × ×™×¨×•. ×¢× ×” ×‘×§×¦×¨×” ×‘×¢×‘×¨×™×ª.";
                if(context) p += ` ×”×§×©×¨: ${context}`;
                
                const r = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`, {
                    method:'POST', headers:{'Content-Type':'application/json'},
                    body: JSON.stringify({ contents:[{parts:[{text:txt}]}], systemInstruction:{parts:[{text:p}]} })
                });
                const d = await r.json();
                addMsg('bot', d.candidates[0].content.parts[0].text);
            } catch { addMsg('bot', '×©×’×™××” ×‘×ª×§×©×•×¨×ª.'); }
        }

        function handleEnter(e) { if(e.key==='Enter') sendMsg(); }

        initBook();
    </script>
</body>
</html>
